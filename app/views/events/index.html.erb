<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Events</h1>
  <%= link_to "New Event", new_event_path, class: "btn btn-primary" %>
</div>

<div class="row">
  <div class="col-md-8">
    <% if @upcoming_events.any? %>
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">Upcoming Events</h5>
        </div>
        <div class="card-body">
          <% @upcoming_events.each do |event| %>
            <div class="row mb-3 pb-3 border-bottom">
              <div class="col-md-8">
                <h6><%= link_to event.name, event, class: "text-decoration-none" %></h6>
                <p class="text-muted mb-1">
                  <i class="fas fa-calendar"></i> <%= event.date.strftime("%B %d, %Y at %I:%M %p") %>
                </p>
                <p class="text-muted mb-0">
                  <i class="fas fa-map-marker-alt"></i> <%= event.venue %>
                </p>
              </div>
              <div class="col-md-4 text-end">
                <div class="mb-2">
                  <span class="badge bg-primary"><%= event.total_attendees %> attendees</span>
                  <span class="badge bg-success"><%= event.checked_in_count %> checked in</span>
                </div>
                <div class="btn-group btn-group-sm" role="group">
                  <%= link_to "Dashboard", dashboard_event_path(event), class: "btn btn-outline-primary" %>
                  <%= link_to "Scanner", scanner_path(event), class: "btn btn-outline-success" %>
                </div>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @past_events.any? %>
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">Past Events</h5>
        </div>
        <div class="card-body">
          <% @past_events.limit(10).each do |event| %>
            <div class="row mb-3 pb-3 border-bottom">
              <div class="col-md-8">
                <h6><%= link_to event.name, event, class: "text-decoration-none text-muted" %></h6>
                <p class="text-muted mb-1">
                  <i class="fas fa-calendar"></i> <%= event.date.strftime("%B %d, %Y") %>
                </p>
                <p class="text-muted mb-0">
                  <i class="fas fa-map-marker-alt"></i> <%= event.venue %>
                </p>
              </div>
              <div class="col-md-4 text-end">
                <div class="mb-2">
                  <span class="badge bg-secondary"><%= event.total_attendees %> attendees</span>
                  <span class="badge bg-success"><%= event.checked_in_count %> attended</span>
                </div>
                <%= link_to "View", event, class: "btn btn-sm btn-outline-secondary" %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <% if @events.empty? %>
      <div class="card text-center">
        <div class="card-body py-5">
          <h5 class="card-title">No Events Yet</h5>
          <p class="card-text">Create your first event to get started with check-ins.</p>
          <%= link_to "Create Event", new_event_path, class: "btn btn-primary" %>
        </div>
      </div>
    <% end %>
  </div>

  <div class="col-md-4">
    <div class="card stats-card text-white">
      <div class="card-body">
        <h5 class="card-title">Quick Stats</h5>
        <div class="row text-center">
          <div class="col-6">
            <h3><%= @events.count %></h3>
            <p class="mb-0">Total Events</p>
          </div>
          <div class="col-6">
            <h3><%= @upcoming_events.count %></h3>
            <p class="mb-0">Upcoming</p>
          </div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-body">
        <h6 class="card-title">Quick Actions</h6>
        <%= link_to "New Event", new_event_path, class: "btn btn-primary btn-sm mb-2" %>
        <br>
        <small class="text-muted">
          Create events, import attendees, and manage check-ins all in one place.
        </small>
      </div>
    </div>
  </div>
</div>